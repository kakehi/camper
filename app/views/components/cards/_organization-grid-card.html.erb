

<% 
    @camp = Camp.where(organization_id: organization.id).first
    
    if @camp.present?
        @href = index_camp_activities_path(organization, @camp)
    else
        @href = index_organization_camp_path(organization)
    end

    if @camp.present?
        @href = index_camp_activities_path(organization, @camp)
        @activities = Activity.where(camp_id: @camp.id)
        @is_price_set = @activities.select { |e| e.base_price.is_a?(Integer) }.count > 0
        if @is_price_set
            @_sorted_activities = @activities.select { |e| e.base_price.is_a?(Integer) }.sort_by(&:"#{"base_price"}")
            @max_price_activity = @_sorted_activities.last
            @min_price_activity = @_sorted_activities.first
            @price = @min_price_activity.base_price
            @static_price = @max_price_activity.base_price == @min_price_activity.base_price
        else
            @price = 120
            @static_price = true
        end

    else
        @href = index_organization_camp_path(organization)
        @price = 80
    end 
%>


<%= render "components/cards/grid-card",
    href: @href,
    hero_image: organization.hero_image,
    title: organization.name,
    sub_information: organization.city,
    organization: organization,
    price: @price,
    static_price: @static_price
%>